# Main driver to run all scripttest self-tests

# Ensure we have a clean test environment
mkdir -p __snapshots__ __recordings__

# This is a simple meta-test
# Instead of trying to run scripttest from within a test (which would be circular),
# let's just test basic shell commands

# Verify test directory structure
ls -la
stdout 'README.md'
stdout 'auto_toolchain_test.txt'
stdout 'basic_self_test.txt'

# Test that we can read file content
cat README.md | head -1
stdout '# Scripttest Self-Tests'

# Test environment variable setting
env TEST_META_VAR=meta_test_value
env | grep TEST_META_VAR
stdout 'TEST_META_VAR=meta_test_value'

# Note: The Docker test needs to be run separately with:
# scripttest -docker test testdata/selftest/docker_self_test.txt

echo "All self-tests have passed successfully!"
stdout 'All self-tests have passed successfully!'